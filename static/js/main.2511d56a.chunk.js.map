{"version":3,"sources":["components/ImageGalleryItem/ImageGalleryItem.js","components/ImageGallery/ImageGallery.js","components/Searchbar/Searchbar.js","components/services/Pixabay.js","components/Button/Button.js","components/Loader/Loader.js","components/Modal/Modal.js","App.js","index.js"],"names":["ImageGalleryItem","className","src","this","props","webformatURL","alt","onClick","showImageHandle","Component","propType","img","PropTypes","string","isRequired","func","ImageGallery","images","map","image","index","showImageHandler","largeImageURL","id","Searchbar","state","value","changeHandler","e","setState","target","submitHandler","event","preventDefault","trim","onSubmit","toast","error","type","autoComplete","autoFocus","placeholder","onChange","fetchImages","searchItem","page","a","fetch","rawResult","ok","json","result","Button","loadMoreHandler","LoaderFunc","color","height","width","modalRoot","document","querySelector","Modal","keyDownHandler","code","onClose","overlayClickHandler","currentTarget","window","addEventListener","removeEventListener","createPortal","bigURL","App","searchValue","isLoading","showModal","maxPages","newElementHight","closeModal","imageUrl","scrollToHandler","top","documentElement","scrollHeight","setTimeout","scrollTo","behavior","searchImagesHandler","total","Math","ceil","totalHits","hits","info","console","toString","min","onSubmitHandler","searchString","prevProps","prevState","Loader","autoClose","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.2511d56a.chunk.js","sourcesContent":["import { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nclass ImageGalleryItem extends Component {\n  render() {\n    return (\n      <li className=\"ImageGalleryItem\">\n        <img\n          src={this.props.webformatURL}\n          alt=\"\"\n          className=\"ImageGalleryItem-image\"\n          onClick={this.props.showImageHandle}\n        />\n      </li>\n    );\n  }\n}\n\nImageGalleryItem.propType = {\n  img: PropTypes.string.isRequired,\n  showImageHandle: PropTypes.func.isRequired,\n};\n\nexport default ImageGalleryItem;\n","import { Component } from 'react';\nimport ImageGalleryItem from '../ImageGalleryItem/ImageGalleryItem';\n\nclass ImageGallery extends Component {\n  render() {\n    return (\n      <ul className=\"ImageGallery\">\n        {this.props.images.map((image, index) => {\n          return (\n            <ImageGalleryItem\n              key={image.id}\n              webformatURL={image.webformatURL}\n              showImageHandle={this.props.showImageHandler(image.largeImageURL)}\n              index={index}\n            />\n          );\n        })}\n      </ul>\n    );\n  }\n}\n\nexport default ImageGallery;\n","import { Component } from 'react';\nimport { toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\n\nclass Searchbar extends Component {\n  state = {\n    value: '',\n  };\n\n  changeHandler = e => {\n    this.setState({ value: e.target.value });\n  };\n\n  submitHandler = event => {\n    event.preventDefault();\n\n    if (this.state.value.trim() === '') {\n      toast.error('Please enter search request!');\n      return;\n    }\n    this.props.onSubmit(this.state.value);\n    this.setState({ value: '' });\n  };\n\n  render() {\n    return (\n      <header className=\"Searchbar\">\n        <form className=\"SearchForm\" onSubmit={this.submitHandler}>\n          <button type=\"submit\" className=\"SearchForm-button\">\n            <span className=\"SearchForm-button-label\">Search</span>\n          </button>\n\n          <input\n            className=\"SearchForm-input\"\n            type=\"text\"\n            autoComplete=\"off\"\n            autoFocus\n            placeholder=\"Search images and photos\"\n            onChange={this.changeHandler}\n            value={this.state.value}\n          />\n        </form>\n      </header>\n    );\n  }\n}\n\nexport default Searchbar;\n","const BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '23070790-299ad5e8dfdc75cc527267990';\n\nconst fetchImages = async (searchItem, page) => {\n  const rawResult = await fetch(\n    `${BASE_URL}?q=${searchItem}&page=${page}&key=${API_KEY}&image_type=photo&orientation=horizontal&per_page=12`,\n  );\n\n  if (!rawResult.ok) {\n    throw rawResult;\n  }\n\n  const result = await rawResult.json();\n\n  return result;\n};\n\nexport default fetchImages;\n","import { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nclass Button extends Component {\n  render() {\n    return (\n      <button\n        type=\"button\"\n        className=\"Button\"\n        onClick={this.props.loadMoreHandler}\n      >\n        Load more\n      </button>\n    );\n  }\n}\n\nButton.propType = {\n  loadMoreHandler: PropTypes.func.isRequired,\n};\n\nexport default Button;\n","import React from 'react';\nimport Loader from 'react-loader-spinner';\n\nconst LoaderFunc = () => {\n  return (\n    <div className=\"loader\">\n      <Loader type=\"TailSpin\" color=\"#303f9f\" height={80} width={80} />\n    </div>\n  );\n};\n\nexport default LoaderFunc;\n","import { Component } from 'react';\nimport { createPortal } from 'react-dom';\n\nconst modalRoot = document.querySelector('#modal-root');\n\nclass Modal extends Component {\n  componentDidMount() {\n    window.addEventListener('keydown', this.keyDownHandler);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.keyDownHandler);\n  }\n\n  keyDownHandler = e => {\n    if (e.code === 'Escape') {\n      this.props.onClose();\n    }\n  };\n\n  overlayClickHandler = event => {\n    if (event.currentTarget === event.target) {\n      this.props.onClose();\n    }\n  };\n\n  render() {\n    return createPortal(\n      <div className=\"Overlay\" onClick={this.overlayClickHandler}>\n        <div className=\"Modal\">\n          <img src={this.props.bigURL} alt=\"\" />\n        </div>\n      </div>,\n      modalRoot,\n    );\n  }\n}\n\nexport default Modal;\n","import { Component } from 'react';\nimport { ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport { toast } from 'react-toastify';\nimport ImageGallery from './components/ImageGallery/ImageGallery';\nimport Searchbar from './components/Searchbar/Searchbar';\nimport fetchImages from './components/services/Pixabay';\nimport Button from './components/Button/Button';\nimport Loader from './components/Loader/Loader';\nimport Modal from './components/Modal/Modal';\n\nclass App extends Component {\n  state = {\n    images: [],\n    searchValue: '',\n    page: 1,\n    isLoading: false,\n    showModal: false,\n    error: '',\n  };\n\n  maxPages = 0;\n  bigURL = '';\n  newElementHight = 0;\n\n  componentDidUpdate(prevProps, prevState) {\n    if (\n      (prevState.searchValue !== this.state.searchValue &&\n        this.state.searchValue !== '') ||\n      prevState.page !== this.state.page\n    ) {\n      this.searchImagesHandler();\n    }\n  }\n\n  closeModal = () => {\n    this.bigURL = '';\n    this.setState({ showModal: false });\n  };\n\n  showImageHandler = imageUrl => () => {\n    this.bigURL = imageUrl;\n    this.setState({ showModal: true });\n  };\n\n  scrollToHandler = () => {\n    const top = document.documentElement.scrollHeight - 150;\n\n    setTimeout(() => {\n      window.scrollTo({\n        top,\n        behavior: 'smooth',\n      });\n    }, 300);\n  };\n\n  searchImagesHandler = async () => {\n    const { searchValue, page } = this.state;\n    this.setState({ isLoading: true, error: '' });\n    try {\n      const result = await fetchImages(searchValue, page);\n\n      if (result.total !== 0) {\n        this.maxPages = Math.ceil(result.totalHits / 12);\n\n        this.setState(({ images }) => ({\n          images: [...images, ...result.hits],\n        }));\n      } else {\n        toast.info(`По вашему запросу ${searchValue} ничего не найдено!`);\n        this.setState(() => ({\n          images: [],\n        }));\n      }\n    } catch (error) {\n      console.error(error);\n      this.setState(() => ({ error: error.toString() }));\n    } finally {\n      this.setState({ isLoading: false });\n    }\n  };\n\n  loadMoreHandler = () => {\n    this.scrollToHandler();\n    this.setState(() => ({\n      page: Math.min(this.maxPages, this.state.page + 1),\n    }));\n  };\n\n  onSubmitHandler = searchString => {\n    this.maxPages = 0;\n\n    this.setState(() => ({\n      images: [],\n      searchValue: searchString,\n      page: 1,\n    }));\n  };\n\n  render() {\n    return (\n      <div className=\"App\">\n        <Searchbar onSubmit={this.onSubmitHandler} />\n        {this.state.error ? (\n          <p className=\"ErrorText\">{this.state.error}</p>\n        ) : (\n          <ImageGallery\n            images={this.state.images}\n            showImageHandler={this.showImageHandler}\n            scrollToHandler={this.scrollToHandler}\n          />\n        )}\n        {this.state.isLoading && <Loader />}\n        {this.state.page < this.maxPages && (\n          <Button loadMoreHandler={this.loadMoreHandler} />\n        )}\n        {this.state.showModal && (\n          <Modal bigURL={this.bigURL} onClose={this.closeModal}></Modal>\n        )}\n        <ToastContainer autoClose={2500} />\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}