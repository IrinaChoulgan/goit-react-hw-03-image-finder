{"version":3,"sources":["components/Loader/Loader.js","components/Modal/Modal.js","components/ImageGalleryItem/ImageGalleryItem.js","components/Button/Button.js","components/ImageGallery/ImageGallery.js","components/Searchbar/Searchbar.js","App.js","index.js"],"names":["FuncLoader","className","type","color","height","width","modalRoot","document","querySelector","Modal","keyDownHandler","e","code","props","onClose","OnOverlayHandler","event","currentTarget","target","window","addEventListener","this","removeEventListener","createPortal","onClick","src","maxImage","alt","Component","ImageGalleryItem","id","showImageFunc","Button","state","ImageGallery","imageValue","error","status","page","perPage","showModal","totalHits","handleClick","setState","scrollForImages","scrollTo","top","documentElement","scrollHeight","behavior","prevProps","prevState","length","fetch","then","res","ok","json","Promise","reject","Error","hits","toast","prev","catch","map","webformatURL","tags","largeImageURL","Math","ceil","Searchbar","handleValueChange","value","toLowerCase","handleSubmit","preventDefault","trim","onSubmit","onChange","placeholder","App","openModal","isLoading","pixaBayImages","newElementHight","handleFormSubmit","closeModal","fullImageURL","imageUrl","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.0399973b.chunk.js","sourcesContent":["import React from 'react';\nimport Loader from 'react-loader-spinner';\n\nconst FuncLoader = () => {\n  return (\n    <div className=\"loader\">\n      <Loader type=\"TailSpin\" color=\"#303f9f\" height={80} width={80} />\n    </div>\n  );\n};\n\nexport default FuncLoader;\n","import { Component } from 'react';\nimport { createPortal } from 'react-dom';\n\nconst modalRoot = document.querySelector('#modal-root');\n\nclass Modal extends Component {\n  componentDidMount() {\n    window.addEventListener('keydown', this.keyDownHandler);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.keyDownHandler);\n  }\n\n  keyDownHandler = e => {\n    if (e.code === 'Escape') {\n      this.props.onClose();\n    }\n  };\n\n  OnOverlayHandler = event => {\n    if (event.currentTarget === event.target) {\n      this.props.onClose();\n    }\n  };\n\n  render() {\n    return createPortal(\n      <div className=\"Overlay\" onClick={this.OnOverlayHandler}>\n        <div className=\"Modal\">\n          <img src={this.props.maxImage} alt=\"\" />\n        </div>\n      </div>,\n      modalRoot,\n    );\n  }\n}\n\nexport default Modal;\n","import { Component } from 'react';\n\nexport default class ImageGalleryItem extends Component {\n  render() {\n    return (\n      <li className=\"ImageGalleryItem\" id={this.props.id}>\n        <img\n          src={this.props.src}\n          alt={this.props.alt}\n          className=\"ImageGalleryItem-image\"\n          onClick={this.props.showImageFunc}\n        />\n      </li>\n    );\n  }\n}\n","import { Component } from 'react';\n\nexport default class Button extends Component {\n  state = {};\n  render() {\n    return (\n      <button type=\"button\" onClick={this.props.onClick} className=\"Button\">\n        Load more\n      </button>\n    );\n  }\n}\n","import { Component } from 'react';\nimport { toast } from 'react-toastify';\nimport FuncLoader from '../Loader/Loader';\nimport Modal from '../Modal/Modal';\nimport ImageGalleryItem from '../ImageGalleryItem/ImageGalleryItem';\nimport Button from '../Button/Button';\n\nexport default class ImageGallery extends Component {\n  state = {\n    imageValue: [],\n    error: null,\n    status: 'idle',\n    page: 1,\n    perPage: 12,\n    showModal: false,\n    totalHits: null,\n  };\n\n  componentDidUpdate(prevProps, prevState) {\n    if (this.props.imageValue !== prevProps.imageValue) {\n      this.setState({\n        imageValue: [],\n      });\n    }\n    if (\n      prevState.imageValue.length !== this.state.imageValue.length &&\n      prevState.imageValue.length !== 0\n    ) {\n      this.scrollForImages();\n    }\n    if (\n      prevProps.imageValue !== this.props.imageValue ||\n      prevState.page !== this.state.page\n    ) {\n      const KEY_API = '23070790-299ad5e8dfdc75cc527267990';\n      const BASE_URL =\n        'https://pixabay.com/api/?image_type=photo&orientation=horizontal';\n\n      this.setState({ status: 'pending' });\n      fetch(\n        `${BASE_URL}&q=${this.props.imageValue}&page=${this.state.page}&per_page=12&key=${KEY_API}`,\n      )\n        .then(res => {\n          if (res.ok) {\n            return res.json();\n          }\n          return Promise.reject(\n            new Error(\n              `по вашему запросу ${this.props.imageValue}ничего не найдено`,\n            ),\n          );\n        })\n        .then(imageValue => {\n          if (imageValue.hits.length === 0) {\n            return toast.error(\n              `ничего не найдено по запросу ${this.props.imageValue}`,\n            );\n          } else\n            this.setState(prev => ({\n              imageValue: [...prev.imageValue, ...imageValue.hits],\n              page: (this.state.page = 1),\n              status: 'resolved',\n            }));\n        })\n\n        .catch(error => this.setState({ error, status: 'rejected' }));\n    }\n  }\n  handleClick = () => {\n    this.setState(() => ({\n      page: this.state.page + 1,\n    }));\n  };\n  scrollForImages = () => {\n    window.scrollTo({\n      top: document.documentElement.scrollHeight,\n      behavior: 'smooth',\n    });\n  };\n  render() {\n    const { imageValue, status } = this.state;\n    return (\n      <div>\n        {status === 'idle' && <div className=\"idleDiv\">Enter name value</div>}\n        <ul className=\"ImageGallery\">\n          {imageValue.map(({ id, webformatURL, tags, largeImageURL }) => (\n            <ImageGalleryItem\n              key={id}\n              src={webformatURL}\n              alt={tags}\n              className=\"ImageGalleryItem-image\"\n              showImageFunc={this.props.showImageFunc(largeImageURL)}\n            />\n          ))}\n          {this.state.showModal && <Modal />}\n        </ul>\n        {status === 'rejected' && (\n          <h1>такого имени нет {this.props.imageValue}</h1>\n        )}\n        {status === 'pending' ? (\n          <FuncLoader />\n        ) : (\n          imageValue.length > 0 &&\n          this.state.page !== Math.ceil(this.state.totalHits / 12) && (\n            <Button onClick={this.handleClick} />\n          )\n        )}\n      </div>\n    );\n  }\n}\n","import { Component } from 'react';\nimport { toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\n\nexport class Searchbar extends Component {\n  state = {\n    imageValue: '',\n  };\n\n  handleValueChange = e => {\n    this.setState({ imageValue: e.currentTarget.value.toLowerCase() });\n  };\n\n  handleSubmit = e => {\n    e.preventDefault();\n\n    if (this.state.imageValue.trim() === '') {\n      return toast('Enter value');\n    }\n    this.props.onSubmit(this.state.imageValue);\n    this.setState({\n      imageValue: '',\n    });\n  };\n\n  render() {\n    return (\n      <div>\n        <header className=\"Searchbar\">\n          <form className=\"SearchForm\" onSubmit={this.handleSubmit}>\n            <button type=\"submit\" className=\"SearchForm-button\">\n              <span className=\"SearchForm-button-label\">Search</span>\n            </button>\n\n            <input\n              onChange={this.handleValueChange}\n              value={this.state.imageValue}\n              className=\"SearchForm-input\"\n              type=\"text\"\n              // autocomplete=\"off\"\n              // autofocus\n              placeholder=\"Search images and photos\"\n            />\n          </form>\n        </header>\n      </div>\n    );\n  }\n}\nexport default Searchbar;\n","import { Component } from 'react';\nimport { ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport ImageGallery from './components/ImageGallery/ImageGallery';\nimport Modal from './components/Modal/Modal';\nimport Searchbar from './components/Searchbar/Searchbar';\n\nexport default class App extends Component {\n  state = {\n    imageValue: [],\n    openModal: false,\n    isLoading: false,\n    pixaBayImages: [],\n  };\n  maxImage = '';\n  newElementHight = 0;\n\n  handleFormSubmit = imageValue => {\n    this.setState({ imageValue, page: 1, pixaBayImages: [] });\n  };\n\n  closeModal = () => {\n    this.fullImageURL = '';\n    this.setState({ openModal: false });\n  };\n\n  showImageFunc = imageUrl => () => {\n    this.maxImage = imageUrl;\n    this.setState({ openModal: true });\n  };\n  render() {\n    return (\n      <div>\n        <Searchbar onSubmit={this.handleFormSubmit} />\n        <ImageGallery\n          imageValue={this.state.imageValue}\n          showImageFunc={this.showImageFunc}\n        ></ImageGallery>\n        {this.state.openModal && (\n          <Modal maxImage={this.maxImage} onClose={this.closeModal}></Modal>\n        )}\n\n        <ToastContainer />\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}